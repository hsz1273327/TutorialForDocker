# 结语

从这部分的篇幅就可以看出来swarm作为docker下自带的集群模式功能有限但胜在简单,绝大多数的内容都是复用的单机docker的东西,新增的东西主要在节点管理和网络上.

而swarm模式也阉割掉了不少原本单机版本的功能,主要的是:

1. `build`字段在swarm模式下不再生效,集群条件下必须从镜像仓库拉取镜像构造容器
2. `container_name`字段在swarm模式下不再生效,容器将只能由docker自动生成名字
3. `devices`字段在swarm模式下不再生效,swarm模式只能使用cpu和内存资源,不再可以调用其他设备
4. `network_mode`字段在swarm模式下不再生效,swarm模式下要直接使用宿主机网络只能挂载名为`host`的网络.

至于什么情况下用swarm呢?当你的需求单机无法满足,但要维护的机器又并没有很多时就可以尝试使用swarm.毕竟其实在熟悉standalone的docker后学用swarm就像白送的一样.而什么时候该放弃swarm换k8s呢?个人认为只要你还管的过来就不用换k8s.