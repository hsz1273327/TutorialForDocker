# 挂载数据卷

docker通常使用`volumes`挂载数据卷来实现对数据的持久化.数据卷可以在`docker-compose`中声明创建也可以在外部通过`docker volume`命令创建.

数据卷的作用有这么几个方面:

1. 持久化数据.容器可以将有必要的数据保存起来.
2. 共享数据,让其他容器/宿主机可以获取到与本容器相同的数据.

在`docker-compose.yml`中可以通过挂载文件系统来让容器和宿主机互通文件.

## 使用宿主机硬盘作为数据卷

## 使用nfs作为数据卷

## 使用sshfs作为数据卷

## 使用cifs作为数据卷

### 存储映射宿主机上的文件系统

最简单的办法是直接映射宿主机上的文件系统,这个我们可以直接在`services`中定义映射,其形式为:

```yml
...
services:
  http_static:
    ...
    volumes:
      - "本地路径:容器中路径"
    ...
...
```

需要注意,在window下默认是无法挂载宿主机磁盘的,要支持这个功能需要进入`docker desktop`的设置中修改设置,设置路径为`Settings->Docker Engine`,在其中的json格式的配置中修改`"experimental"`项为`true`即可.

>例2: [为nginx挂载本地文件系统获取静态html文件](https://github.com/hsz1273327/TutorialForDocker/tree/example-nginx-volumes)

我们在项目目录下新建一个文件夹`static`,其中放上一个html文件

+ `index.html`

```html
<h1>hello</h1>
```

然后修改`docker-compose.yml`文件,为其加上挂载文件系统的配置.

+ `docker-compose.yml`

```yml
version: "2.4"
services:
  http_static:
    ...
    volumes: 
      - "./static:/usr/share/nginx/html"
    ...
```