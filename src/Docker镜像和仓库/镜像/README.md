# 镜像

docker的镜像是底层由引导文件系统(bootfs),上层由文件系统叠加而成的,的一种虚拟化文件系统.

它的结构如图:

![docker镜像的结构](imgs/docker-filesystems-multilayer.png)

正如图上所画,其实镜像的最顶层就是容器(可写容器),而镜像是一层一层叠加上去的,最下面的镜像就是基础镜像,
我们用的ubuntu,其实只是ubuntu的最小安装而已,然后叠一层vim再叠一层啥的.

## 写时复制

当docker第一次启动容器时,时间上读写层是空的,当文件系统发生变化时这些变化都会应用到这一层,
它会从只读层将要改的文件复制到读写层,然后所有修改都在读写层而不会影响只读层而只读层的文件将在使用时代替读写层的对应文件,
这种机制便是写时复制,利用这一机制我们可以快速构建镜像并运行包含我们自己应用的容器

这部分我们将从如下几个方面讨论docker镜像的使用

+ 镜像的基本使用
+ 构建镜像
+ Dockerfile
